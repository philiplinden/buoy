# 2025-07-26

- Moved `controls` to the `buoy-ui` crate.
- Added a new config `scenario.ron` to set up the initial scene.
  - Required new dependencies: `serde`, `bevy_common_assets`, `ron`.
  - I made some placeholder code for the `GasPropertiesConfig` struct, which
    will be used to set up gas properties from the config file.
  - Removed the `scene` module from `buoy-runtime`.
- Removed lots of experimental UI code from `buoy-ui`.

To speed up the physics development, I have taken steps to make the runtime
usable from the terminal (headless mode), like adding in some support for
loading data from config files.

I would like the runtime in headless mode to have a TUI that shows stats
updating in real time, like the update speed, current values of forces, etc. in
a panel that refreshes, rather than just printing new lines to the terminal. A
REPL would be nice to maintain interactive control of the simulation, even in
headless mode.

A TUI and REPL are not required for the simulation to work, but they would help
debugging and development. I am going to vibe code the basics of a TUI and REPL
in the `buoy-runtime` crate before going back to the physics code.

- Added a REPL to the runtime (vibe coded) with a simple command to exit the
  simulation.
- Added a `ConsolePlugin` to the runtime that includes the REPL and TUI.

I am curious about how this framework could be used for underwater simulations
too. The physics should be the same except that the fluid is incompressible.
Maybe this is as simple as having the "air" properties change to "water"
properties after the altitude goes below sea level.

This line of thinking is favorable to the "fluid volume" approach, where fluid
properties of the ambient environment are simple lookup tables based on
coordinates of a grid volume. I should revisit that later.

For now, I want to get the simple HAB flight profile running.

I restructured the REPL so it is more flexible with ECS by vibe coding a
`CommandRegistry` that is separate from the REPL executor. It would be great to
turn this into its own little Bevy plugin and have it support clap syntax.

I also finally implemented the bare bones of execution stages so I can order the
simulation pipeline with more control.
